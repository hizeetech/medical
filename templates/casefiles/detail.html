{% extends 'base.html' %}
{% block head_title %}Case File · {{ case_file.patient.full_name }}{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <h1 class="h4 mb-0">Case File</h1>
    <div class="small text-muted">{{ case_file.patient.full_name }} · Member ID: {{ case_file.patient.member_id }}</div>
  </div>
  <div>
    <a class="btn btn-outline-secondary" href="{% url 'casefiles_search' %}"><i class="bi bi-arrow-left"></i> Back to Search</a>
  </div>
</div>

<ul class="nav nav-tabs" id="casefileTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" type="button"
            hx-get="{% url 'casefile_tab_patient_info' case_file.id %}" hx-target="#tab-content" hx-trigger="load, click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Patient Info
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_medical_history' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Medical History
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_visits' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Visits & Notes
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_prescriptions' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Prescriptions
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_lab_results' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Lab & Tests
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_billing' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Billing
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_maternity' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Maternity/Pediatric
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_attachments' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Attachments
    </button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" type="button"
            hx-get="{% url 'casefile_tab_access' case_file.id %}" hx-target="#tab-content" hx-trigger="click" hx-swap="innerHTML" hx-on:htmx:beforeRequest="document.querySelectorAll('#casefileTabs .nav-link').forEach(l=>l.classList.remove('active')); this.classList.add('active');">
      Access & Updates
    </button>
  </li>
</ul>

<div id="tab-content" class="mt-3"></div>
{% endblock %}